"use strict";(self["webpackChunkgami"]=self["webpackChunkgami"]||[]).push([[6],{3006:function(e,t,o){o.r(t),o.d(t,{default:function(){return Ne}});var s=o(6252),a=o(3577);const l=(0,s._)("h2",null,"後台",-1),i={class:"container"},d={class:"my-3 d-flex justify-content-end"},n={class:"accordion",id:"accordionExample"},c={class:"accordion-header",id:"headingOne"},r=["data-bs-target"],u=(0,s.Uk)(" 第一章，認識座標系 "),p={class:"fs-5"},m={class:"w-75 text-end"},h=(0,s._)("span",{class:"badge fs-5 rounded-pill bg-secondary"},"課程編號：",-1),b={class:"mx-3 text-danger"},_=["id"],g={class:"accordion-body"},y={class:"container text-start"},v={class:"row"},f={class:"col-4"},w=["src"],k={class:"col position-relative h-100 p-5"},x=(0,s._)("br",null,null,-1),D=["onClick"],M=["onClick"],U={class:"modal fade",id:"Modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"};function E(e,t,o,E,C,N){const P=(0,s.up)("Delete-modal"),A=(0,s.up)("CreateEditModal");return(0,s.wg)(),(0,s.iD)(s.HY,null,[l,(0,s._)("div",i,[(0,s._)("div",d,[(0,s._)("button",{onClick:t[0]||(t[0]=t=>N.openModal("new",e.item)),type:"button",class:"btn bnt-lg fs-4 rounded btn-primary","data-bs-toggle":"modal","data-bs-target":"#Modal"}," 新增課程 ")]),(0,s._)("div",n,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(C.data,(e=>((0,s.wg)(),(0,s.iD)("div",{class:"accordion-item",key:e.id},[(0,s._)("h2",c,[(0,s._)("button",{class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":`#${e.id}`,"aria-expanded":"true","aria-controls":"collapseOne"},[u,(0,s._)("div",p,(0,a.zw)(e.title),1),(0,s._)("div",m,[h,(0,s._)("strong",b,(0,a.zw)(e.id),1)])],8,r)]),(0,s._)("div",{id:e.id,class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingOne"},[(0,s._)("div",g,[(0,s._)("div",y,[(0,s._)("div",v,[(0,s._)("div",f,[(0,s._)("img",{src:e.imageUrl,class:"img-thumbnail",alt:"結果圖"},null,8,w)]),(0,s._)("div",k,[(0,s.Uk)(" 課程描述 "+(0,a.zw)(e.description)+" ",1),x,(0,s._)("button",{onClick:t=>N.openModal("del",e),type:"button",class:"btn btn-danger position-absolute bottom-0 start-0","data-bs-toggle":"modal","data-bs-target":"#DeleteModal"}," 刪除 ",8,D),(0,s._)("button",{onClick:t=>N.openModal("edit",e),type:"button",class:"btn btn-primary position-absolute bottom-0 end-0"}," 編輯 ",8,M)])])])])],8,_)])))),128))])]),(0,s.Wm)(P,{courseName:C.temp.title,courseId:C.temp.id,ref:"DeleteModal"},null,8,["courseName","courseId"]),(0,s._)("div",U,[(0,s.Wm)(A,{"course-temp":C.temp,status:this.isNew,ref:"CreateEditModal"},null,8,["course-temp","status"])])],64)}var C=o(7244);const N={class:"modal fade",id:"DeleteModal",ref:"DeleteModal",tabindex:"-1","aria-labelledby":"DeleteModalLabel","aria-hidden":"true"},P={class:"modal-dialog"},A={class:"modal-content"},V=(0,s._)("div",{class:"modal-header bg-danger"},[(0,s._)("h5",{class:"modal-title text-light",id:"DeleteModalLabel"},"刪除課程"),(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),I={class:"modal-body text-start"},$=(0,s.Uk)(" 是否刪除下列課程 "),T=(0,s._)("br",null,null,-1),z=(0,s.Uk)(" 名稱："),L=(0,s._)("br",null,null,-1),O=(0,s.Uk)(" 編號："),K={class:"modal-footer"},B=(0,s._)("button",{type:"button",class:"btn btn-danger","data-bs-dismiss":"modal"}," 返回 ",-1);function H(e,t,o,l,i,d){return(0,s.wg)(),(0,s.iD)("div",N,[(0,s._)("div",P,[(0,s._)("div",A,[V,(0,s._)("div",I,[$,T,z,(0,s._)("strong",null,(0,a.zw)(o.courseName),1),L,O,(0,s._)("strong",null,(0,a.zw)(o.courseId),1)]),(0,s._)("div",K,[(0,s._)("button",{onClick:t[0]||(t[0]=(...e)=>d.deleteCourse&&d.deleteCourse(...e)),type:"button",class:"btn btn-secondary"}," 確認刪除 "),B])])])],512)}var W={props:["courseId","courseName"],data(){return{DeleteModal:null,token:{NODE_ENV:"production",VUE_APP_API:"https://vue3-course-api.hexschool.io/v2",VUE_APP_PATH:"kai",BASE_URL:"/gami03/"}.VUE_APP_TOKEN}},methods:{getData(){this.$http("https://vue3-course-api.hexschool.io/v2/api/kai/products/all").then((e=>{this.data=e.data.products})).catch((e=>{console.log(e)}))},deleteCourse(){const e=`https://vue3-course-api.hexschool.io/v2/api/kai/admin/product/${this.courseId}`;this.$http.delete(e).then((e=>{console.log(e),this.DeleteModal.hide(),window.location.reload()})).catch((e=>{console.log(e)}))}},mounted(){this.axios.defaults.headers.common.Authorization=this.token,this.DeleteModal=new C.u_(document.getElementById("DeleteModal"),{keyboard:!1})}},S=o(3744);const Y=(0,S.Z)(W,[["render",H]]);var Z=Y,j=o(9963);const F={class:"modal-dialog modal-lg"},R={class:"modal-content"},Q={class:"modal-header"},q={key:0,class:"modal-title",id:"exampleModalLabel"},X={key:1,class:"modal-title",id:"exampleModalLabel"},G=(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),J={class:"modal-body text-start"},ee={class:"row"},te=(0,s._)("div",{class:"col"},[(0,s._)("img",{class:"img-fluid",src:"https://images.unsplash.com/photo-1618477388954-7852f32655ec?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxzZWFyY2h8Mnx8amF2YXNjcmlwdHxlbnwwfDF8MHx8&auto=format&fit=crop&w=800&q=60",alt:""})],-1),oe={class:"col"},se={class:"mb-3"},ae=(0,s._)("label",{for:"courseTitle",class:"form-label"},"課程標題",-1),le={class:"mb-3"},ie=(0,s._)("label",{for:"courseDescription",class:"form-label"},"課程描述",-1),de={class:"mb-3"},ne=(0,s._)("label",{for:"courseDescription",class:"form-label"},"難度分類",-1),ce={class:"mb-3"},re=(0,s._)("label",{for:"courseImageUrl",class:"form-label"},"效果預覽圖",-1),ue={class:"mb-3"},pe=(0,s._)("label",{for:"courseKeywords",class:"form-label"},"課程關鍵字",-1),me={class:"mb-3"},he=(0,s._)("label",{for:"courseKeywords",class:"form-label"},"片段碼",-1),be={class:"mb-3"},_e=(0,s._)("label",{for:"courseKeywords",class:"form-label"},"題目",-1),ge={class:"mb-3"},ye=(0,s._)("label",{for:"courseKeywords",class:"form-label"},"難度",-1),ve={class:"form-check"},fe=(0,s._)("label",{class:"form-check-label",for:"is_enabled"}," 是否啟用 ",-1),we={class:"modal-footer"},ke=(0,s._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function xe(e,t,o,a,l,i){return(0,s.wg)(),(0,s.iD)("div",F,[(0,s._)("div",R,[(0,s._)("div",Q,[this.isNew?((0,s.wg)(),(0,s.iD)("h5",q," 新增課程 ")):((0,s.wg)(),(0,s.iD)("h5",X,"編輯課程")),G]),(0,s._)("div",J,[(0,s._)("div",ee,[te,(0,s._)("div",oe,[(0,s._)("form",null,[(0,s._)("div",se,[ae,(0,s.wy)((0,s._)("input",{type:"text",class:"form-control",id:"courseTitle",placeholder:"請輸入課程標題","onUpdate:modelValue":t[0]||(t[0]=e=>this.temp.title=e)},null,512),[[j.nr,this.temp.title]])]),(0,s._)("div",le,[ie,(0,s.wy)((0,s._)("textarea",{type:"text",class:"form-control",id:"courseDescription",placeholder:"請輸入課程描述","onUpdate:modelValue":t[1]||(t[1]=e=>this.temp.description=e)},null,512),[[j.nr,this.temp.description]])]),(0,s._)("div",de,[ne,(0,s.wy)((0,s._)("input",{type:"text",class:"form-control",id:"courseImageUrl",placeholder:"請輸入難度分類（簡單、普通、困難）","onUpdate:modelValue":t[2]||(t[2]=e=>this.temp.category=e)},null,512),[[j.nr,this.temp.category]])]),(0,s._)("div",ce,[re,(0,s.wy)((0,s._)("input",{type:"text",class:"form-control",id:"courseImageUrl",placeholder:"請輸入課程效果預覽圖","onUpdate:modelValue":t[3]||(t[3]=e=>this.temp.imageUrl=e)},null,512),[[j.nr,this.temp.imageUrl]])]),(0,s._)("div",ue,[pe,(0,s.wy)((0,s._)("input",{type:"text",class:"form-control",id:"courseKeywords",placeholder:"請輸入課程關鍵字","onUpdate:modelValue":t[4]||(t[4]=e=>this.temp.keyWords=e)},null,512),[[j.nr,this.temp.keyWords]])]),(0,s._)("div",me,[he,(0,s.wy)((0,s._)("textarea",{type:"text",class:"form-control",id:"courseCode",placeholder:"請輸入課程片段碼","onUpdate:modelValue":t[5]||(t[5]=e=>this.temp.Code=e)},null,512),[[j.nr,this.temp.Code]])]),(0,s._)("div",be,[_e,(0,s.wy)((0,s._)("textarea",{type:"text",class:"form-control",id:"courseCode",placeholder:"請輸入課程題目，包含<script>標籤","onUpdate:modelValue":t[6]||(t[6]=e=>this.temp.InitQuiz=e)},null,512),[[j.nr,this.temp.InitQuiz]])]),(0,s._)("div",ge,[ye,(0,s.wy)((0,s._)("input",{type:"number",class:"form-control",id:"courseCode",placeholder:"請輸入課程難度（1-入門、2-普通、3-困難）","onUpdate:modelValue":t[7]||(t[7]=e=>this.temp.level=e)},null,512),[[j.nr,this.temp.level]])]),(0,s._)("div",ve,[(0,s.wy)((0,s._)("input",{class:"form-check-input",type:"checkbox","true-value":1,"false-value":0,id:"is_enabled","onUpdate:modelValue":t[8]||(t[8]=e=>this.temp.is_enabled=e)},null,512),[[j.e8,this.temp.is_enabled]]),fe])])])])]),(0,s._)("div",we,[ke,this.isNew?((0,s.wg)(),(0,s.iD)("button",{key:0,type:"button",class:"btn btn-danger",onClick:t[9]||(t[9]=(...e)=>i.addData&&i.addData(...e))}," 確認新增 ")):((0,s.wg)(),(0,s.iD)("button",{key:1,type:"button",class:"btn btn-danger",onClick:t[10]||(t[10]=e=>i.editData())}," 確認編輯 "))])])])}var De={props:["courseTemp","status"],data(){return{token:{NODE_ENV:"production",VUE_APP_API:"https://vue3-course-api.hexschool.io/v2",VUE_APP_PATH:"kai",BASE_URL:"/gami03/"}.VUE_APP_TOKEN,temp:{keyWords:""},modal:null,isNew:1}},watch:{courseTemp:function(){this.courseTemp.id!==this.temp.id&&(this.temp=this.courseTemp)},status:function(){this.status!==this.isNew&&(this.isNew=this.status)}},methods:{addData(){const e="https://vue3-course-api.hexschool.io/v2/api/kai/admin/product",t=this.temp;this.$http.post(e,{data:t}).then((e=>{console.log(e)})).catch((e=>{console.log(e)}))},editData(){const e=`https://vue3-course-api.hexschool.io/v2/api/kai/admin/product/${this.temp.id}`,t=this.temp;this.$http.put(e,{data:t}).then((e=>{})).catch((e=>{console.log(e)}))}},mounted(){this.axios.defaults.headers.common.Authorization=this.token,this.temp=this.courseTemp,this.isNew=this.status,this.Modal=new C.u_(document.getElementById("Modal"),{keyboard:!1})}};const Me=(0,S.Z)(De,[["render",xe]]);var Ue=Me,Ee={components:{DeleteModal:Z,CreateEditModal:Ue},data(){return{token:{NODE_ENV:"production",VUE_APP_API:"https://vue3-course-api.hexschool.io/v2",VUE_APP_PATH:"kai",BASE_URL:"/gami03/"}.VUE_APP_TOKEN,modal:null,temp:{title:"",category:"course",origin_price:100,price:1e3,unit:"1",description:"",content:"",is_enabled:1,imageUrl:"",imagesUrl:[],Code:""},data:[],isNew:1}},methods:{checkLogin(){const e=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*\=\s*([^;]*).*$)|^.*$/,"$1");if(e){this.$http.defaults.headers.common.Authorization=e;const t="https://vue3-course-api.hexschool.io/v2/api/user/check";this.$http.post(t,{api_token:this.token}).then((e=>{this.checkSucess=!0,this.getData()})).catch((e=>{console.log(e),this.$router.push("/dashboardLogin")}))}else alert("請先登入"),this.$router.push("/login")},getData(){this.$http("https://vue3-course-api.hexschool.io/v2/api/kai/admin/products/all").then((e=>{this.data=e.data.products})).catch((e=>{console.log(e)}))},openModal(e,t){"new"===e?(this.isNew=1,this.Modal.show()):"edit"===e?(this.temp={...t},this.isNew=0,this.Modal.show()):(this.temp={...t},this.DeleteModal.show())}},mounted(){this.Modal=new C.u_(document.getElementById("Modal"),{keyboard:!1}),this.DeleteModal=new C.u_(document.getElementById("DeleteModal"),{keyboard:!1}),this.getData(),this.checkLogin()}};const Ce=(0,S.Z)(Ee,[["render",E]]);var Ne=Ce}}]);
//# sourceMappingURL=6.e2d92455.js.map